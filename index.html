<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xpert - 데이터 협업 워크스페이스</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8f9fa;
            color: #2c2c2c;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* 헤더 */
        .header {
            background: white;
            border-bottom: 2px solid #e9ecef;
            padding: 20px 32px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 32px;
            font-weight: 800;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .progress-flow {
            display: flex;
            gap: 24px;
            align-items: center;
        }

        .step-indicator {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 16px;
            border-radius: 24px;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .step-indicator.completed {
            background: #34c759;
            color: white;
        }

        .step-indicator.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: scale(1.05);
        }

        .step-indicator.pending {
            background: #f1f3f4;
            color: #6e6e73;
        }

        .step-number {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
        }

        /* 메인 콘텐츠 */
        .main-content {
            flex: 1;
            margin-top: 100px;
            padding: 0;
            max-width: none;
            margin-left: 0;
            margin-right: 0;
            width: 100%;
        }

        /* 워크스페이스 컨테이너 */
        .workspace-container {
            background: white;
            border-radius: 0;
            box-shadow: none;
            margin-bottom: 0;
            overflow: hidden;
            height: calc(100vh - 120px);
            display: flex;
            flex-direction: column;
        }

        .workspace-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 32px 40px;
            border-bottom: 1px solid #e9ecef;
            background: linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%);
        }

        .workspace-title {
            font-size: 28px;
            font-weight: 700;
            color: #1d1d1f;
            margin-bottom: 8px;
        }

        .workspace-subtitle {
            font-size: 16px;
            color: #6e6e73;
        }

        .workspace-stats {
            display: flex;
            gap: 24px;
            align-items: center;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: #667eea;
        }

        .stat-label {
            font-size: 12px;
            color: #6e6e73;
            margin-top: 4px;
        }

        /* 협업 워크스페이스 */
        .collaboration-workspace {
            display: grid;
            grid-template-columns: 1fr;
            flex: 1;
            overflow: hidden;
        }

        .collaboration-workspace.with-panels {
            grid-template-columns: 600px 1fr 640px;
        }

        /* 팀 요청 패널 */
        .team-requests-panel {
            border-right: 1px solid #e9ecef;
            background: #fafbfc;
            padding: 24px;
            display: none;
            overflow-y: auto;
            max-height: calc(100vh - 200px);
        }

        .team-requests-panel.active {
            display: block;
        }

        /* 본체 데이터 섹션 */
        .master-data-section {
            background: #f8f9ff;
            border: 1px solid #e0e7ff;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .master-data-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }

        .master-data-icon {
            font-size: 18px;
        }

        .master-data-title {
            font-size: 16px;
            font-weight: 600;
            color: #1d1d1f;
        }

        .master-data-stats {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
        }

        .master-stat {
            font-size: 12px;
            color: #6e6e73;
        }

        .master-stat strong {
            color: #667eea;
        }

        .master-data-desc {
            font-size: 13px;
            color: #6e6e73;
            line-height: 1.4;
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .panel-title {
            font-size: 18px;
            font-weight: 600;
            color: #1d1d1f;
        }

        .team-requests {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .team-request-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .team-request-card:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        }

        .team-request-card.active {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .team-info {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .team-avatar {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            color: white;
        }

        .team-marketing { background: #667eea; }
        .team-finance { background: #34c759; }
        .team-sales { background: #ff9500; }
        .team-dev { background: #5856d6; }

        .team-name {
            font-size: 14px;
            font-weight: 600;
            color: #1d1d1f;
        }

        .request-purpose {
            font-size: 13px;
            color: #6e6e73;
            margin-bottom: 8px;
        }

        .request-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
        }

        .data-format {
            font-size: 12px;
            padding: 4px 8px;
            background: #f1f3f4;
            border-radius: 4px;
            color: #5f6368;
        }
        
        .team-request-btn {
            padding: 4px 12px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .team-request-btn:hover {
            background: #5a6fd8;
            transform: translateY(-1px);
        }

        .priority-badge {
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 12px;
            font-weight: 600;
        }

        .priority-high {
            background: #fee;
            color: #d73a49;
        }

        .priority-medium {
            background: #fff3cd;
            color: #856404;
        }

        .priority-low {
            background: #d1ecf1;
            color: #0c5460;
        }

        /* 중앙 메인 영역 */
        .collaboration-main {
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            position: relative;
            max-height: calc(100vh - 200px);
        }
        
        /* 중앙 패널 통합 타이틀 */
        .central-panel-title {
            background: linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%);
            border-bottom: 1px solid #e9ecef;
            padding: 20px 24px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .central-title {
            font-size: 24px;
            font-weight: 700;
            color: #1d1d1f;
            margin-bottom: 8px;
        }
        
        .central-subtitle {
            font-size: 14px;
            color: #6e6e73;
        }

        /* 데이터 연결 단계 */
        .data-connection-stage {
            padding: 60px;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 600px;
        }

        .connection-title {
            font-size: 32px;
            font-weight: 700;
            color: #1d1d1f;
            margin-bottom: 16px;
        }

        .connection-subtitle {
            font-size: 18px;
            color: #6e6e73;
            margin-bottom: 40px;
        }

        .connection-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            max-width: 600px;
            width: 100%;
        }

        .connection-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 16px;
            padding: 32px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .connection-card:hover {
            border-color: #667eea;
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.15);
        }

        .connection-card.available {
            border-color: #667eea;
        }

        .connection-card.coming-soon {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .connection-icon {
            font-size: 48px;
            margin-bottom: 20px;
        }

        .connection-name {
            font-size: 20px;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 12px;
        }

        .connection-desc {
            font-size: 14px;
            color: #6e6e73;
            margin-bottom: 16px;
        }

        .coming-soon-badge {
            display: inline-block;
            padding: 4px 12px;
            background: #f1f3f4;
            color: #6e6e73;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        /* AWS 연결 폼 */
        .aws-connection-form {
            display: none;
            max-width: 400px;
            width: 100%;
            text-align: left;
            margin-top: 20px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 8px;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 24px;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-secondary {
            background: #f1f3f4;
            color: #5f6368;
        }

        /* 합성 데이터 증강 섹션 */
        .synthetic-data-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 16px;
            margin: 16px 0;
            border: 1px solid #e9ecef;
        }

        .synthetic-options {
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
        }

        .synthetic-option {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .synthetic-option input[type="radio"] {
            margin: 0;
        }

        .synthetic-option label {
            cursor: pointer;
            font-size: 14px;
            color: #495057;
        }

        /* 증강 세부 옵션 */
        .augment-detail-options {
            margin-top: 16px;
            padding: 12px;
            background: #f0f2f5;
            border-radius: 8px;
            border: 1px solid #d1d5db;
        }

        .augment-detail-title {
            font-size: 12px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 12px;
        }

        .augment-methods {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .augment-method {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 13px;
            color: #495057;
        }

        .request-notification {
            background: #fff3e0;
            border: 1px solid #ffcc02;
            border-radius: 8px;
            padding: 16px;
            margin-top: 16px;
        }

        /* 기본 알림 텍스트 스타일은 위에서 정의됨 */

        .notification-channels {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .channel-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .channel-option input[type="checkbox"] {
            margin: 0;
        }

        .channel-option label {
            cursor: pointer;
            font-size: 13px;
            color: #495057;
        }

        /* 데이터 증강 중 상태 */
        .team-dataset-card.augmenting, .drop-zone.augmenting {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
            position: relative;
        }

        .augmenting-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(102, 126, 234, 0.9);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* 컬럼 선택 영역 */
        .column-selection-area {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid #dee2e6;
        }

        .column-selection-title {
            font-size: 14px;
            font-weight: 600;
            color: #495057;
            margin-bottom: 12px;
        }

        .selected-columns-for-augment {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .augment-column-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .augment-column-option:hover {
            background: #f0f4ff;
            border-color: #667eea;
        }

        .augment-column-option input[type="checkbox"] {
            margin: 0;
        }

        .augment-column-option label {
            cursor: pointer;
            font-size: 13px;
            color: #495057;
            flex: 1;
        }

        /* 컬럼별 코멘트 영역 */
        .column-comments {
            margin-top: 16px;
        }

        .column-comment-item {
            margin-bottom: 12px;
            padding: 12px;
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            display: none;
        }

        .column-comment-item.show {
            display: block;
            animation: fadeInUp 0.3s ease;
        }

        .column-comment-title {
            font-size: 13px;
            font-weight: 600;
            color: #495057;
            margin-bottom: 8px;
        }

        .column-comment-textarea {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            font-size: 12px;
            resize: vertical;
            min-height: 60px;
            font-family: inherit;
        }

        .column-comment-textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 스캔 단계 */
        .scanning-stage {
            padding: 60px;
            text-align: center;
            display: none;
        }

        .progress-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: conic-gradient(#667eea 0% var(--progress), #e9ecef var(--progress) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 24px;
            position: relative;
        }

        .progress-circle::before {
            content: '';
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: white;
            position: absolute;
        }

        .progress-text {
            font-size: 18px;
            font-weight: 700;
            color: #667eea;
            z-index: 1;
        }

        /* 보안 처리 단계 */
        .processing-stage {
            padding: 40px;
            display: none;
        }

        .processing-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 40px 0;
        }

        .process-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            flex: 1;
        }

        .step-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: #f1f3f4;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.3s ease;
        }

        .step-icon.active {
            background: #667eea;
            color: white;
        }

        .step-icon.completed {
            background: #34c759;
            color: white;
        }

        .step-label {
            font-size: 14px;
            color: #6e6e73;
            text-align: center;
        }

        .step-connector {
            flex: 1;
            height: 2px;
            background: #e9ecef;
            margin: 0 16px;
        }

        .step-connector.completed {
            background: #34c759;
        }

        /* 하이브리드 편집 인터페이스 */
        .hybrid-editor {
            display: none;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            padding: 24px;
            min-height: 500px;
        }

        .column-tree {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
        }

        .tree-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 16px;
        }

        .tree-title {
            font-size: 16px;
            font-weight: 600;
            color: #1d1d1f;
        }

        .analysis-preview-btn {
            padding: 6px 12px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            position: relative;
        }

        .preview-tooltip {
            position: absolute;
            top: -120px;
            right: 0;
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            font-size: 12px;
            white-space: nowrap;
            display: none;
            z-index: 100;
        }

        .preview-tooltip.show {
            display: block;
        }

        .column-group {
            margin-bottom: 16px;
        }

        .group-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            padding: 8px;
            border-radius: 6px;
            transition: background-color 0.2s ease;
        }

        .group-header:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .group-icon {
            font-size: 12px;
            transition: transform 0.2s ease;
        }

        .group-icon.collapsed {
            transform: rotate(-90deg);
        }

        .group-name {
            font-size: 14px;
            font-weight: 600;
            color: #1d1d1f;
        }

        .column-list {
            padding-left: 20px;
        }

        .column-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 8px;
            margin-bottom: 4px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }

        .column-item:hover {
            background: white;
            border-color: #667eea;
        }

        .column-item.selected {
            background: #f8f9ff;
            border-color: #667eea;
        }

        .column-name {
            font-size: 13px;
            color: #2c2c2c;
            flex: 1;
        }

        .column-type {
            font-size: 11px;
            color: #6e6e73;
            background: #f1f3f4;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .column-detail {
            background: white;
            border-radius: 12px;
            padding: 20px;
        }

        .detail-header {
            margin-bottom: 20px;
        }

        .selected-column-name {
            font-size: 18px;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 8px;
        }

        .column-info {
            display: flex;
            gap: 16px;
            margin-bottom: 20px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .info-label {
            font-size: 12px;
            color: #6e6e73;
            font-weight: 600;
        }

        .info-value {
            font-size: 14px;
            color: #1d1d1f;
        }

        .column-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .action-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .action-label {
            font-size: 13px;
            font-weight: 600;
            color: #1d1d1f;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 6px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            background: white;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .action-btn:hover, .action-btn.active {
            border-color: #667eea;
            background: #f8f9ff;
            color: #667eea;
        }

        .send-to-workspace {
            margin-top: 16px;
            padding: 10px 16px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
        }

        .send-to-workspace:hover {
            background: #5a6fd8;
        }

        /* 우측 패널 - 개인 작업공간 */
        .personal-workspace {
            border-left: 1px solid #e9ecef;
            background: white;
            padding: 24px;
            display: none;
            overflow-y: auto;
            max-height: calc(100vh - 200px);
        }

        .personal-workspace.active {
            display: block;
        }

        .workspace-header-personal {
            margin-bottom: 20px;
        }

        .workspace-title-personal {
            font-size: 16px;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 8px;
        }

        .workspace-subtitle-personal {
            font-size: 12px;
            color: #6e6e73;
        }

        .drop-zone {
            border: 2px dashed #d1d5db;
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 20px;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .drop-zone.dragover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .drop-zone-icon {
            font-size: 32px;
            margin-bottom: 12px;
            opacity: 0.5;
        }

        .drop-zone-text {
            font-size: 14px;
            color: #6e6e73;
        }

        .selected-columns {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .selected-column {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }

        .selected-column-info {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .selected-column-name-small {
            font-size: 13px;
            font-weight: 600;
            color: #1d1d1f;
        }

        .selected-column-source {
            font-size: 11px;
            color: #6e6e73;
        }

        .selected-column-description {
            font-size: 10px;
            color: #8e8e93;
            font-style: italic;
            margin-top: 2px;
        }

        .remove-column {
            background: none;
            border: none;
            color: #d73a49;
            cursor: pointer;
            font-size: 16px;
            padding: 4px;
        }

        .workspace-actions {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .export-options {
            display: flex;
            gap: 8px;
        }

        .export-btn {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            background: white;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .export-btn:hover {
            border-color: #667eea;
            color: #667eea;
        }

        /* 중복 방지 시스템 */
        .duplicate-check-section {
            margin-top: 24px;
            border-top: 1px solid #e9ecef;
            padding-top: 20px;
        }

        .duplicate-check-title {
            font-size: 14px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .duplicate-indicator {
            background: #fff8f0;
            border: 1px solid #ffd0a6;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
            display: none;
        }

        .duplicate-indicator.active {
            display: block;
        }

        .duplicate-indicator.high {
            background: #fef2f2;
            border-color: #fecaca;
        }

        .duplicate-indicator.medium {
            background: #fffbeb;
            border-color: #fed7aa;
        }

        .duplicate-indicator.low {
            background: #f0fdf4;
            border-color: #bbf7d0;
        }

        .duplicate-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .duplicate-score {
            font-weight: 600;
            font-size: 14px;
        }

        .duplicate-score.high {
            color: #dc2626;
        }

        .duplicate-score.medium {
            color: #d97706;
        }

        .duplicate-score.low {
            color: #16a34a;
        }

        .duplicate-team-info {
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 8px;
        }

        .duplicate-columns {
            font-size: 11px;
            color: #9ca3af;
            background: rgba(0,0,0,0.05);
            padding: 4px 8px;
            border-radius: 4px;
        }

        .related-reports-section {
            margin-top: 16px;
        }

        .related-reports-title {
            font-size: 13px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .related-report-item {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .related-report-item:hover {
            background: #e2e8f0;
            border-color: #cbd5e1;
        }

        .report-agent-info {
            font-size: 11px;
            color: #64748b;
            margin-bottom: 4px;
        }

        .report-title {
            font-size: 12px;
            color: #334155;
            font-weight: 500;
        }

        /* 알림 버튼 */
        .notification-button {
            position: relative;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 24px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }

        .notification-button:hover {
            transform: scale(1.05) translateY(-1px);
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4);
        }

        .notification-text {
            font-size: 14px;
            font-weight: 600;
            color: white;
        }

        /* 백그라운드 알림용 텍스트 */
        .request-notification .notification-text {
            color: #b8860b;
            margin-bottom: 12px;
            line-height: 1.5;
        }

        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ef4444;
            color: white;
            font-size: 12px;
            font-weight: 700;
            min-width: 24px;
            height: 24px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid white;
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
        }

        /* 사이드 패널 */
        .collaboration-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -4px 0 20px rgba(0,0,0,0.1);
            z-index: 1000;
            transition: right 0.3s ease;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .collaboration-panel.active {
            right: 0;
        }

        .panel-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .panel-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .panel-header {
            padding: 24px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #f8f9fa;
        }

        .panel-title {
            font-size: 20px;
            font-weight: 700;
            color: #2c3e50;
        }

        .panel-close-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: none;
            background: #e9ecef;
            font-size: 18px;
            font-weight: 600;
            color: #6c757d;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .panel-close-btn:hover {
            background: #dee2e6;
            color: #495057;
        }

        .panel-content {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
        }

        .history-header {
            margin-bottom: 24px;
        }

        .history-title {
            font-size: 24px;
            font-weight: 700;
            color: #1d1d1f;
        }

        .history-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
        }

        .history-section {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #1d1d1f;
        }

        .section-count {
            font-size: 12px;
            background: #667eea;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
        }

        .history-item {
            padding: 16px;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            transition: all 0.2s ease;
        }

        .history-item:hover {
            border-color: #667eea;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);
        }

        .history-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .history-item-title {
            font-size: 14px;
            font-weight: 600;
            color: #1d1d1f;
        }

        .history-status {
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 12px;
            font-weight: 600;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-approved {
            background: #d1ecf1;
            color: #0c5460;
        }

        .status-completed {
            background: #d4edda;
            color: #155724;
        }

        .history-item-desc {
            font-size: 13px;
            color: #6e6e73;
            margin-bottom: 12px;
        }

        .history-actions {
            display: flex;
            gap: 8px;
        }

        .history-action-btn {
            padding: 6px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            background: white;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .history-action-btn.approve {
            border-color: #34c759;
            color: #34c759;
        }

        .history-action-btn.reject {
            border-color: #d73a49;
            color: #d73a49;
        }

        .history-action-btn:hover {
            background: #f8f9fa;
        }

        /* 액션 버튼 */
        .main-action-buttons {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 32px;
        }

        .btn-large {
            padding: 16px 32px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }

        .btn-large.primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
        }

        .btn-large.primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        /* 숨김 */
        .hidden {
            display: none !important;
        }

        /* 애니메이션 */
        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* 팝업 스타일 */
        .analysis-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .popup-content {
            background: white;
            border-radius: 16px;
            padding: 32px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .popup-title {
            font-size: 20px;
            font-weight: 700;
            color: #1d1d1f;
        }
        
        .popup-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #6e6e73;
        }
        
        .agent-section {
            margin-bottom: 24px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
        }
        
        .agent-name {
            font-size: 16px;
            font-weight: 600;
            color: #667eea;
            margin-bottom: 12px;
        }
        
        .agent-capabilities {
            list-style: none;
            padding: 0;
        }
        
        .agent-capabilities li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }
        
        .agent-capabilities li:before {
            content: '•';
            color: #667eea;
            font-weight: bold;
            position: absolute;
            left: 0;
        }
        
        /* 반응형 */
        @media (max-width: 1400px) {
            .collaboration-workspace.with-panels {
                grid-template-columns: 400px 1fr 400px;
            }
        }
        
        @media (max-width: 1024px) {
            .collaboration-workspace.with-panels {
                grid-template-columns: 1fr;
                grid-template-rows: auto 1fr auto;
            }
            
            .team-requests-panel {
                border-right: none;
                border-bottom: 1px solid #e9ecef;
                max-height: 200px;
            }
            
            .personal-workspace {
                border-left: none;
                border-top: 1px solid #e9ecef;
                max-height: 200px;
            }

            .hybrid-editor {
                grid-template-columns: 1fr;
            }

            .history-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<style>
/* 추가 스타일 */
.central-panel-title {
    background: linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%);
    border-bottom: 1px solid #e9ecef;
    padding: 20px 24px;
    text-align: center;
    position: sticky;
    top: 0;
    z-index: 10;
    flex-shrink: 0;
}

.central-title {
    font-size: 24px;
    font-weight: 700;
    color: #1d1d1f;
    margin-bottom: 8px;
}

.central-subtitle {
    font-size: 14px;
    color: #6e6e73;
}

.empty-state {
    flex: 1;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
}

.empty-state-content {
    text-align: center;
    max-width: 400px;
}

.empty-state-icon {
    font-size: 64px;
    margin-bottom: 24px;
    opacity: 0.3;
}

.empty-state-title {
    font-size: 24px;
    font-weight: 600;
    color: #1d1d1f;
    margin-bottom: 12px;
}

.empty-state-desc {
    font-size: 16px;
    color: #6e6e73;
    line-height: 1.5;
}

.header-controls {
    display: flex;
    align-items: center;
    gap: 24px;
}
</style>
<body>
    <div class="container">
        <!-- 헤더 -->
        <header class="header">
            <div class="header-content">
                <div class="logo">Xpert</div>
                
                <div class="progress-flow">
                    <div class="step-indicator active" id="step1-indicator">
                        <div class="step-number">1</div>
                        <span>데이터 연결</span>
                    </div>
                    <div class="step-indicator pending" id="step2-indicator">
                        <div class="step-number">2</div>
                        <span>보안 처리</span>
                    </div>
                    <div class="step-indicator pending" id="step3-indicator">
                        <div class="step-number">3</div>
                        <span>협업 워크스페이스</span>
                    </div>
                    <div class="step-indicator pending" id="step4-indicator">
                        <div class="step-number">4</div>
                        <span>에이전트 분석</span>
                    </div>
                    <div class="step-indicator pending" id="step5-indicator">
                        <div class="step-number">5</div>
                        <span>통합 리포트</span>
                    </div>
                </div>
                
                <!-- 알림 버튼 -->
                <div class="notification-button" id="notification-button" onclick="toggleCollaborationPanel()" style="display: none;">
                    <span class="notification-text">협업 요청</span>
                    <div class="notification-badge" id="notification-badge">3</div>
                </div>
            </div>
        </header>

        <!-- 메인 콘텐츠 -->
        <main class="main-content">
            <!-- 워크스페이스 컨테이너 -->
            <section class="workspace-container fade-in">
                <div class="workspace-header">
                    <div>
                        <div class="workspace-title">데이터 협업 워크스페이스</div>
                        <div class="workspace-subtitle">안전한 데이터 처리부터 팀별 실시간 협업까지</div>
                    </div>
                    <div class="header-controls">
                        <button class="btn-large primary hidden" id="proceed-btn" type="button" onclick="window.location.href='xpert_agent_plusa.html'">
                        에이전트 분석 시작 →
                        </button>
                        <div class="workspace-stats">
                            <div class="stat-item">
                                <div class="stat-value" id="data-size">-</div>
                                <div class="stat-label">처리된 데이터</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="team-count">-</div>
                                <div class="stat-label">대기 중인 팀</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="status">준비</div>
                                <div class="stat-label">현재 상태</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="collaboration-workspace" id="workspace">
                    <!-- 팀 요청 패널 -->
                    <div class="team-requests-panel" id="team-panel">
                        <div class="panel-header">
                            <div class="panel-title">데이터 탐색기</div>
                        </div>

                        <!-- 본체 데이터 섹션 -->
                        <div class="master-data-section" onclick="selectMasterData()" style="cursor: pointer; position: sticky; top: 0; z-index: 10;">
                            <div class="master-data-header">
                                <div class="master-data-icon">🏛️</div>
                                <div class="master-data-title">본체 데이터</div>
                            </div>
                            <div class="master-data-stats">
                                <div class="master-stat"><strong>4.8GB</strong> 처리완료</div>
                                <div class="master-stat"><strong>96%</strong> 품질유지</div>
                            </div>
                            <div class="master-data-desc">
                                DTS 보안처리 완료된 마스터 데이터셋으로<br>
                                팀별 안전한 협업이 가능합니다
                            </div>
                        </div>
                        
                        <div class="team-requests">
                            <div class="team-request-card" onclick="selectTeamData('marketing')">
                                <div class="team-info">
                                    <div class="team-avatar team-marketing">📊</div>
                                    <div class="team-name">마케팅팀</div>
                                </div>
                                <div class="request-purpose">고객별 구매 패턴 분석용</div>
                                <div class="request-details">
                                    <div class="data-format">Dashboard용</div>
                                    <button class="team-request-btn" onclick="requestTeamData(event, 'marketing')">공유 요청</button>
                                </div>
                            </div>

                            <div class="team-request-card" onclick="selectTeamData('dev')">
                                <div class="team-info">
                                    <div class="team-avatar team-dev">⚙️</div>
                                    <div class="team-name">개발팀</div>
                                </div>
                                <div class="request-purpose">ML 모델 학습용</div>
                                <div class="request-details">
                                    <div class="data-format">API 연동</div>
                                    <button class="team-request-btn" onclick="requestTeamData(event, 'dev')">공유 요청</button>
                                </div>
                            </div>

                            <div class="team-request-card" onclick="selectTeamData('finance')">
                                <div class="team-info">
                                    <div class="team-avatar team-finance">💰</div>
                                    <div class="team-name">재무팀</div>
                                </div>
                                <div class="request-purpose">월별 집계 리포트용</div>
                                <div class="request-details">
                                    <div class="data-format">Excel 출력</div>
                                    <button class="team-request-btn" onclick="requestTeamData(event, 'finance')">공유 요청</button>
                                </div>
                            </div>

                            <div class="team-request-card" onclick="selectTeamData('sales')">
                                <div class="team-info">
                                    <div class="team-avatar team-sales">🎯</div>
                                    <div class="team-name">영업팀</div>
                                </div>
                                <div class="request-purpose">고객 세그먼트 분석용</div>
                                <div class="request-details">
                                    <div class="data-format">리포트용</div>
                                    <button class="team-request-btn" onclick="requestTeamData(event, 'sales')">공유 요청</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 중앙 메인 영역 -->
                    <div class="collaboration-main">
                        <!-- 중앙 패널 통합 타이틀 - 초기에는 숨김 -->
                        <div class="central-panel-title" id="central-panel-title" style="display: none;">
                            <div class="central-title">편집 스튜디오</div>
                            <div class="central-subtitle">데이터 탐색과 편집을 위한 통합 작업 공간</div>
                        </div>
                        
                        <!-- 빈 상태 메시지 - 초기에는 숨김 -->
                        <div class="empty-state" id="empty-state" style="display: none;">
                            <div class="empty-state-content">
                                <div class="empty-state-icon">📁</div>
                                <div class="empty-state-title">데이터셋을 선택해주세요</div>
                                <div class="empty-state-desc">좌측에서 본체 데이터 또는 팀별 데이터를 선택하면<br>편집 작업을 시작할 수 있습니다</div>
                            </div>
                        </div>
                        
                        <!-- 1. 데이터 연결 단계 -->
                        <div class="data-connection-stage" id="connection-stage">
                            <div class="connection-title">데이터 소스 선택</div>
                            <div class="connection-subtitle">안전한 협업을 위해 데이터 소스를 연결해주세요</div>
                            
                            <div class="connection-options">
                                <div class="connection-card available" onclick="showAWSForm()">
                                    <div class="connection-icon">☁️</div>
                                    <div class="connection-name">AWS 연결</div>
                                    <div class="connection-desc">일반 AWS 계정을 통한<br>데이터베이스 직접 연결</div>
                                </div>
                                
                                <div class="connection-card available" onclick="useSampleData()">
                                    <div class="connection-icon">📊</div>
                                    <div class="connection-name">샘플 데이터</div>
                                    <div class="connection-desc">즉시 체험 가능한<br>데모용 데이터셋</div>
                                </div>
                            </div>

                            <!-- AWS 연결 폼 -->
                            <div class="aws-connection-form" id="aws-form">
                                <div class="form-group">
                                    <label class="form-label">데이터베이스 IP 주소</label>
                                    <input type="text" class="form-input" placeholder="예: 192.168.1.100" id="db-ip">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">포트</label>
                                    <input type="text" class="form-input" placeholder="예: 3306" id="db-port">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">데이터베이스 이름</label>
                                    <input type="text" class="form-input" placeholder="예: sales_db" id="db-name">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">사용자명</label>
                                    <input type="text" class="form-input" placeholder="사용자명" id="db-user">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">비밀번호</label>
                                    <input type="password" class="form-input" placeholder="비밀번호" id="db-password">
                                </div>
                                <div class="form-buttons">
                                    <button class="btn btn-secondary" onclick="hideAWSForm()">취소</button>
                                    <button class="btn btn-primary" onclick="connectAWS()">연결</button>
                                </div>
                            </div>
                        </div>

                        <!-- 2. 스캔 단계 -->
                        <div class="scanning-stage" id="scanning-stage">
                            <div class="connection-title">민감정보 검증 중</div>
                            <div class="connection-subtitle">연결된 데이터의 보안 상태를 자동으로 검증하고 있습니다</div>
                            
                            <div class="progress-circle" style="--progress: 75%">
                                <div class="progress-text" id="scan-progress">75%</div>
                            </div>
                            <div style="text-align: center; margin-top: 16px;">
                                <div style="font-size: 16px; color: #1d1d1f; margin-bottom: 8px;" id="scan-status">민감정보 검증 중...</div>
                                <div style="font-size: 14px; color: #6e6e73;" id="scan-detail">4.8GB 데이터 분석 진행</div>
                            </div>
                        </div>

                        <!-- 3. 보안 처리 단계 -->
                        <div class="processing-stage" id="processing-stage">
                            <div style="text-align: center; margin-bottom: 20px;">
                                <div class="connection-title">보안 처리 진행 중</div>
                                <div class="connection-subtitle">민감정보가 감지되어 DTS 및 보안 처리를 진행합니다</div>
                            </div>
                            
                            <div class="processing-steps">
                                <div class="process-step">
                                    <div class="step-icon completed" id="step-dts">🔒</div>
                                    <div class="step-label">DTS 변환</div>
                                </div>
                                <div class="step-connector completed" id="connector1"></div>
                                <div class="process-step">
                                    <div class="step-icon active" id="step-security">🛡️</div>
                                    <div class="step-label">보안 처리</div>
                                </div>
                                <div class="step-connector" id="connector2"></div>
                                <div class="process-step">
                                    <div class="step-icon" id="step-quality">✅</div>
                                    <div class="step-label">품질 검증</div>
                                </div>
                            </div>

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-top: 32px;">
                                <div style="background: #f8f9fa; padding: 20px; border-radius: 12px;">
                                    <div style="font-size: 24px; font-weight: 700; color: #667eea; margin-bottom: 8px;">96%</div>
                                    <div style="font-size: 14px; color: #6e6e73;">데이터 품질 유지율</div>
                                </div>
                                <div style="background: #f8f9fa; padding: 20px; border-radius: 12px;">
                                    <div style="font-size: 24px; font-weight: 700; color: #667eea; margin-bottom: 8px;">47건</div>
                                    <div style="font-size: 14px; color: #6e6e73;">민감정보 보안 처리</div>
                                </div>
                            </div>
                        </div>

                        <!-- 4. 하이브리드 편집 인터페이스 -->
                        <div class="hybrid-editor" id="hybrid-editor" style="display: none;">
                            <div class="column-tree">
                                <div class="tree-header">
                                    <div class="tree-title">데이터 컬럼 (4.8GB)</div>
                                </div>

                                <div class="section-title-area" style="margin-bottom: 16px;">
                                    <div style="font-size: 14px; font-weight: 600; color: #667eea; margin-bottom: 8px;">전체 데이터셋 구조</div>
                                    <div style="font-size: 12px; color: #6e6e73;">좌측에서 팀을 선택하면 해당 팀에 맞춤화된 데이터가 표시됩니다</div>
                                </div>

                                <div class="column-group">
                                    <div class="group-header" onclick="toggleGroup('customer')">
                                        <span class="group-icon">▼</span>
                                        <span class="group-name">고객 정보 (4개)</span>
                                    </div>
                                    <div class="column-list" id="customer-columns">
                                        <div class="column-item" onclick="selectColumn('customer_id', '텍스트(20)', '고객 정보')">
                                            <div class="column-name">customer_id</div>
                                            <div class="column-type">텍스트</div>
                                        </div>
                                        <div class="column-item" onclick="selectColumn('customer_name', '텍스트(100)', '고객 정보')">
                                            <div class="column-name">customer_name</div>
                                            <div class="column-type">텍스트</div>
                                        </div>
                                        <div class="column-item" onclick="selectColumn('age_group', '텍스트(10)', '고객 정보')">
                                            <div class="column-name">age_group</div>
                                            <div class="column-type">텍스트</div>
                                        </div>
                                        <div class="column-item" onclick="selectColumn('region', '텍스트(50)', '고객 정보')">
                                            <div class="column-name">region</div>
                                            <div class="column-type">텍스트</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="column-group">
                                    <div class="group-header" onclick="toggleGroup('transaction')">
                                        <span class="group-icon">▼</span>
                                        <span class="group-name">거래 정보 (3개)</span>
                                    </div>
                                    <div class="column-list" id="transaction-columns">
                                        <div class="column-item" onclick="selectColumn('purchase_date', '날짜시간', '거래 정보')">
                                            <div class="column-name">purchase_date</div>
                                            <div class="column-type">날짜</div>
                                        </div>
                                        <div class="column-item" onclick="selectColumn('amount', '숫자(10,2)', '거래 정보')">
                                            <div class="column-name">amount</div>
                                            <div class="column-type">숫자</div>
                                        </div>
                                        <div class="column-item" onclick="selectColumn('product_category', '텍스트(50)', '거래 정보')">
                                            <div class="column-name">product_category</div>
                                            <div class="column-type">텍스트</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="column-detail">
                                <div class="detail-header">
                                    <div class="selected-column-name" id="selected-column-name">컬럼을 선택하세요</div>
                                </div>
                                
                                <div class="column-info" id="column-info" style="display: none;">
                                    <div class="info-item">
                                        <div class="info-label">데이터 타입</div>
                                        <div class="info-value" id="column-type-detail">-</div>
                                    </div>
                                    <div class="info-item">
                                        <div class="info-label">소속 그룹</div>
                                        <div class="info-value" id="column-group-detail">-</div>
                                    </div>
                                    <div class="info-item">
                                        <div class="info-label">샘플 데이터</div>
                                        <div class="info-value" id="column-sample">예시 값이 표시됩니다</div>
                                    </div>
                                    
                                    <div class="info-item" id="column-alias-info" style="display: none;">
                                        <div class="info-label">별칭</div>
                                        <div class="info-value" id="column-alias-value">-</div>
                                    </div>
                                    
                                    <div class="info-item" id="column-description-info" style="display: none;">
                                        <div class="info-label">설명</div>
                                        <div class="info-value" id="column-description-value">-</div>
                                    </div>
                                </div>

                                <div class="column-actions" id="column-actions" style="display: none;">
                                    <div class="action-group">
                                        <div class="action-label">별칭 추가</div>
                                        <div class="action-buttons">
                                            <button class="action-btn" onclick="addColumnAlias()">별칭 추가</button>
                                        </div>
                                    </div>
                                    
                                    <div class="action-group">
                                        <div class="action-label">컬럼 설명</div>
                                        <div class="action-buttons">
                                            <button class="action-btn" onclick="addColumnDescription()">설명 추가</button>
                                        </div>
                                    </div>

                                    <div class="action-group">
                                        <div class="action-label">데이터 변환</div>
                                        <div class="action-buttons">
                                            <button class="action-btn" onclick="setTransform('normalize')">정규화</button>
                                            <button class="action-btn" onclick="setTransform('categorize')">카테고리화</button>
                                            <button class="action-btn" onclick="setTransform('aggregate')">집계</button>
                                        </div>
                                    </div>

                                    <div class="action-group">
                                        <div class="action-label">접근 권한</div>
                                        <div class="action-buttons">
                                            <button class="action-btn active" onclick="setAccess('all')">전체 접근</button>
                                            <button class="action-btn" onclick="setAccess('limited')">제한 접근</button>
                                        </div>
                                    </div>

                                    <button class="send-to-workspace" onclick="sendToWorkspace()">
                                        내 작업공간으로 보내기 →
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 우측 패널 - 팀 작업공간 -->
                    <div class="personal-workspace" id="personal-workspace">
                        <div class="workspace-header-personal">
                            <div class="workspace-title-personal">팀 작업 데이터셋</div>
                            <div class="workspace-subtitle-personal">선택한 컬럼들로 팀별 맞춤 데이터셋을 구성하세요</div>
                        </div>

                        <div class="drop-zone" id="drop-zone">
                            <div class="drop-zone-icon">📥</div>
                            <div class="drop-zone-text">
                                좌측에서 컬럼을 선택하거나<br>
                                드래그하여 이곳에 놓으세요
                            </div>
                        </div>

                        <div class="selected-columns" id="selected-columns">
                            <!-- 선택된 컬럼들이 여기에 표시됩니다 -->
                        </div>

                        <!-- 합성 데이터 증강 섹션 -->
                        <div class="synthetic-data-section">
                            <div class="workspace-title-personal">🧪 합성 데이터 증강</div>
                            <div class="synthetic-options">
                                <div class="synthetic-option" onclick="selectSyntheticOption('none')">
                                    <input type="radio" name="synthetic" id="none" checked>
                                    <label for="none">해당 없음</label>
                                </div>
                                <div class="synthetic-option" onclick="selectSyntheticOption('enable')">
                                    <input type="radio" name="synthetic" id="enable">
                                    <label for="enable">증강 적용</label>
                                </div>
                            </div>
                            
                            <!-- 증강 세부 옵션 (증강 적용 선택시 표시) -->
                            <div class="augment-detail-options" id="augmentDetailOptions" style="display: none;">
                                <div class="augment-detail-title">증강 방식 선택 (복수 선택 가능)</div>
                                <div class="augment-methods">
                                    <div class="augment-method">
                                        <input type="checkbox" id="crawling" onchange="updateAugmentMethod()">
                                        <label for="crawling">크롤링 기반</label>
                                    </div>
                                    <div class="augment-method">
                                        <input type="checkbox" id="row" onchange="updateAugmentMethod()">
                                        <label for="row">로우 단위</label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 요청 입력 클릭 시 나타나는 알림 설정 -->
                            <div class="request-notification" id="requestNotification" style="display: none;">
                                <div class="notification-text">
                                    데이터 증강은 현재 추가 작업 시간이 필요합니다.<br>
                                    백그라운드 작업을 위한 알람 채널을 알려주세요.
                                </div>
                                <div class="notification-channels">
                                    <div class="channel-option">
                                        <input type="checkbox" id="email" checked>
                                        <label for="email">📧 이메일</label>
                                    </div>
                                    <div class="channel-option">
                                        <input type="checkbox" id="sms">
                                        <label for="sms">📱 문자</label>
                                    </div>
                                    <div class="channel-option">
                                        <input type="checkbox" id="push">
                                        <label for="push">🔔 푸시 알림</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="workspace-actions">
                            <div class="export-options">
                                <button class="export-btn" onclick="exportData('csv')">CSV</button>
                                <button class="export-btn" onclick="exportData('json')">JSON</button>
                                <button class="export-btn" onclick="exportData('excel')">Excel</button>
                            </div>
                            <button class="btn btn-primary" id="generateBtn" style="width: 100%; margin-top: 12px;" onclick="generateData()">
                                팀 데이터셋 생성
                            </button>
                        </div>

                        <!-- 중복 방지 시스템 -->
                        <div class="duplicate-check-section" id="duplicate-check-section">
                            <div class="duplicate-check-title">
                                🔍 실시간 중복도 검사
                            </div>
                            
                            <!-- 중복도 표시 영역 -->
                            <div class="duplicate-indicator" id="duplicate-indicator">
                                <div class="duplicate-header">
                                    <div class="duplicate-score" id="duplicate-score">중복도 95%</div>
                                    <div style="font-size: 12px; color: #6b7280;">높음</div>
                                </div>
                                <div class="duplicate-team-info" id="duplicate-team-info">
                                    마케팅팀 데이터셋과 높은 유사성
                                </div>
                                <div class="duplicate-columns" id="duplicate-columns">
                                    공통 컬럼: customer_id, purchase_date, amount
                                </div>
                            </div>

                            <!-- 관련 리포트 섹션 -->
                            <div class="related-reports-section" id="related-reports-section" style="display: none;">
                                <div class="related-reports-title">
                                    📊 관련 컬럼 리포트
                                </div>
                                <div id="related-reports-container">
                                    <!-- 관련 리포트들이 여기에 동적으로 추가됩니다 -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>


        </main>
    </div>

    <!-- 분석 미리보기 팝업 -->
    <div class="analysis-popup" id="analysis-popup">
        <div class="popup-content">
            <div class="popup-header">
                <div class="popup-title">다음 단계 에이전트 분석 미리보기</div>
                <button class="popup-close" onclick="closeAnalysisPopup()">×</button>
            </div>
            
            <div class="agent-section">
                <div class="agent-name">🎯 고객 세그멘테이션 에이전트</div>
                <ul class="agent-capabilities">
                    <li>연령대, 지역별 고객 그룹 자동 분류</li>
                    <li>구매 패턴 기반 고객 성향 분석</li>
                    <li>고객 생애가치(CLV) 예측 모델링</li>
                    <li>맞춤형 마케팅 전략 추천</li>
                </ul>
            </div>
            
            <div class="agent-section">
                <div class="agent-name">🤖 머신러닝 모델 에이전트</div>
                <ul class="agent-capabilities">
                    <li>데이터 전처리 및 피처 엔지니어링</li>
                    <li>예측 모델 자동 학습 및 최적화</li>
                    <li>모델 성능 평가 및 검증</li>
                    <li>실시간 예측 API 자동 배포</li>
                </ul>
            </div>
            
            <div class="agent-section">
                <div class="agent-name">📊 매출 예측 에이전트</div>
                <ul class="agent-capabilities">
                    <li>시계열 분석을 통한 매출 트렌드 예측</li>
                    <li>계절성 및 주기성 패턴 감지</li>
                    <li>외부 변수 고려한 정확도 향상</li>
                    <li>리스크 시나리오 분석 및 대응안 제시</li>
                </ul>
            </div>
            
            <div class="agent-section">
                <div class="agent-name">🎯 리드 스코어링 에이전트</div>
                <ul class="agent-capabilities">
                    <li>고객 행동 데이터 기반 전환 확률 계산</li>
                    <li>영업 우선순위 자동 랭킹</li>
                    <li>최적 접촉 시점 및 채널 추천</li>
                    <li>성공 확률 기반 영업 전략 수립</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        let currentStage = 'connection';
        let scanProgress = 0;
        let hasSensitiveData = Math.random() > 0.3;
        let selectedColumns = [];
        let selectedColumnData = null;
        // 컬럼별 메타데이터 저장소 (별칭, 설명 등)
        let columnMetadata = {};

        // 단계별 상태 업데이트
        function updateStepIndicator(step) {
            const indicators = ['step1-indicator', 'step2-indicator', 'step3-indicator', 'step4-indicator', 'step5-indicator'];
            
            indicators.forEach((id, index) => {
                const indicator = document.getElementById(id);
                indicator.classList.remove('active', 'completed', 'pending');
                
                if (index < step - 1) {
                    indicator.classList.add('completed');
                } else if (index === step - 1) {
                    indicator.classList.add('active');
                } else {
                    indicator.classList.add('pending');
                }
            });
        }

        // AWS 연결 폼 표시
        function showAWSForm() {
            document.querySelector('.connection-options').style.display = 'none';
            document.getElementById('aws-form').style.display = 'block';
        }

        // AWS 연결 폼 숨김
        function hideAWSForm() {
            document.querySelector('.connection-options').style.display = 'grid';
            document.getElementById('aws-form').style.display = 'none';
        }

        // AWS 연결
        function connectAWS() {
            const ip = document.getElementById('db-ip').value;
            const port = document.getElementById('db-port').value;
            const dbName = document.getElementById('db-name').value;
            
            if (!ip || !port || !dbName) {
                alert('모든 필드를 입력해주세요.');
                return;
            }
            
            startScanning();
        }

        // 샘플 데이터 사용 - 바로 협업 워크스페이스로 이동
        function useSampleData() {
            startCollaboration();
        }

        // 스캔 시작
        function startScanning() {
            document.getElementById('connection-stage').style.display = 'none';
            document.getElementById('scanning-stage').style.display = 'block';
            currentStage = 'scanning';
            
            updateStepIndicator(2);
            
            const progressElement = document.getElementById('scan-progress');
            const statusElement = document.getElementById('scan-status');
            const detailElement = document.getElementById('scan-detail');
            
            const scanInterval = setInterval(() => {
                scanProgress += Math.random() * 15;
                progressElement.textContent = Math.min(100, Math.floor(scanProgress)) + '%';
                
                const progressCircle = document.querySelector('.progress-circle');
                progressCircle.style.setProperty('--progress', Math.min(100, scanProgress) + '%');
                
                if (scanProgress >= 100) {
                    clearInterval(scanInterval);
                    completeScan();
                }
            }, 300);
        }

        // 스캔 완료
        function completeScan() {
            const statusElement = document.getElementById('scan-status');
            const detailElement = document.getElementById('scan-detail');
            
            if (hasSensitiveData) {
                statusElement.textContent = '민감정보 감지됨';
                detailElement.textContent = '보안 처리가 필요합니다';
                
                setTimeout(() => {
                    startProcessing();
                }, 2000);
            } else {
                statusElement.textContent = '민감정보 없음';
                detailElement.textContent = '보안 처리 완료 - 협업 워크스페이스 준비';
                
                setTimeout(() => {
                    startCollaboration();
                }, 2000);
            }
        }

        // 보안 처리 시작
        function startProcessing() {
            document.getElementById('scanning-stage').style.display = 'none';
            document.getElementById('processing-stage').style.display = 'block';
            currentStage = 'processing';
            
            // 처리 단계 시뮬레이션
            setTimeout(() => {
                document.getElementById('step-security').classList.remove('active');
                document.getElementById('step-security').classList.add('completed');
                document.getElementById('connector2').classList.add('completed');
                document.getElementById('step-quality').classList.add('active');
                
                setTimeout(() => {
                    document.getElementById('step-quality').classList.remove('active');
                    document.getElementById('step-quality').classList.add('completed');
                    
                    setTimeout(() => {
                        startCollaboration();
                    }, 1000);
                }, 2000);
            }, 3000);
        }

        // 협업 워크스페이스 시작
        function startCollaboration() {
            document.getElementById('scanning-stage').style.display = 'none';
            document.getElementById('processing-stage').style.display = 'none';
            document.getElementById('connection-stage').style.display = 'none';
            
            // 레이아웃 변경
            document.getElementById('workspace').classList.add('with-panels');
            document.getElementById('team-panel').classList.add('active');
            document.getElementById('personal-workspace').classList.add('active');
            
            // 중앙 패널 타이틀과 빈 상태 표시
            document.getElementById('central-panel-title').style.display = 'block';
            document.getElementById('empty-state').style.display = 'flex';
            
            // 상태 업데이트
            updateStepIndicator(3);
            document.getElementById('data-size').textContent = '4.8GB';
            document.getElementById('team-count').textContent = '4개';
            document.getElementById('status').textContent = '협업 중';
            
            // 진행 버튼 활성화
            document.getElementById('proceed-btn').classList.remove('hidden');
            
            // 알림 버튼 표시
            document.getElementById('notification-button').style.display = 'flex';
        }

        // 컬럼 그룹 토글
        function toggleGroup(groupId) {
            const columnList = document.getElementById(groupId + '-columns');
            const icon = event.target.querySelector('.group-icon');
            
            if (columnList.style.display === 'none') {
                columnList.style.display = 'block';
                icon.classList.remove('collapsed');
            } else {
                columnList.style.display = 'none';
                icon.classList.add('collapsed');
            }
        }

        // 컬럼 선택 (기본)
        function selectColumn(name, type, group) {
            // 이전 선택 해제
            document.querySelectorAll('.column-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            // 현재 항목 선택
            event.target.classList.add('selected');
            
            // 상세 정보 업데이트
            document.getElementById('selected-column-name').textContent = name;
            document.getElementById('column-type-detail').textContent = type;
            document.getElementById('column-group-detail').textContent = group;
            
            // 샘플 데이터 설정
            const sampleData = {
                'customer_id': 'C001, C002, C003...',
                'customer_name': '김철수, 이영희, 박민수...',
                'email': 'user@email.com, test@gmail.com...',
                'amount': '15000, 89000, 45000...',
                'purchase_date': '2024-01-15, 2024-01-16...'
            };
            document.getElementById('column-sample').textContent = sampleData[name] || '예시 값이 표시됩니다';
            
            // 액션 영역 표시
            document.getElementById('column-info').style.display = 'flex';
            document.getElementById('column-actions').style.display = 'block';
            
            selectedColumnData = { name, type, group };
            
            // 저장된 메타데이터 불러오기
            const metadata = columnMetadata[name] || {};
            selectedColumnData.alias = metadata.alias;
            selectedColumnData.description = metadata.description;
            selectedColumnData.originalName = metadata.originalName || name;
            
            // 별칭과 설명 정보 업데이트 (기존 데이터가 있다면 표시)
            if (selectedColumnData.alias) {
                document.getElementById('column-alias-value').textContent = selectedColumnData.alias;
                document.getElementById('column-alias-info').style.display = 'flex';
            } else {
                document.getElementById('column-alias-info').style.display = 'none';
            }
            
            if (selectedColumnData.description) {
                document.getElementById('column-description-value').textContent = selectedColumnData.description;
                document.getElementById('column-description-info').style.display = 'flex';
            } else {
                document.getElementById('column-description-info').style.display = 'none';
            }
        }

        // 팀별 컬럼 선택 (에이전트 정보 포함)
        function selectTeamColumn(name, type, group, agent) {
            selectColumn(name, type, group);
            selectedColumnData.agent = agent;
            
            // 에이전트 정보 추가 표시
            const columnInfo = document.getElementById('column-info');
            const existingAgentInfo = columnInfo.querySelector('.agent-info');
            if (existingAgentInfo) {
                existingAgentInfo.remove();
            }
            
            const agentInfoDiv = document.createElement('div');
            agentInfoDiv.className = 'info-item agent-info';
            agentInfoDiv.innerHTML = `
                <div class="info-label">활용 가능 에이전트</div>
                <div class="info-value agent-badge" onclick="showAgentPreview('${agent}')" style="cursor: pointer; color: #667eea; text-decoration: underline;">${agent}</div>
            `;
            columnInfo.appendChild(agentInfoDiv);
        }

        // 에이전트 미리보기 표시
        function showAgentPreview(agentName) {
            const agentAnalysis = {
                '고객 세그멘테이션 에이전트': '• 연령대별 고객 그룹 분류\n• 구매 패턴 기반 세그먼트 예측\n• 고객 가치 점수 산출\n• 맞춤형 마케팅 캠페인 추천',
                '머신러닝 모델 학습 에이전트': '• 데이터 전처리 및 정규화\n• 기계학습 모델 학습\n• 예측 정확도 평가\n• API 연동을 위한 모델 배포',
                '매출 예측 에이전트': '• 월별/분기별 매출 예측\n• 계절성 트렌드 분석\n• 예상 수익성 계산\n• 리스크 요인 식별 및 대응방안 제시',
                '리드 스코어링 에이전트': '• 고객 전환 가능성 점수화\n• 영업 우선순위 추천\n• 접촉 시점 최적화\n• 성공 확률 기반 전략 수립'
            };
            
            alert('해당 에이전트에서 수행 가능한 분석:\n\n' + (agentAnalysis[agentName] || '• 데이터 기반 인사이트 도출\n• 특화된 분석 리포트 생성\n• 비즈니스 전략 추천'));
        }

        // 분석 미리보기 토글
        function togglePreview() {
            const tooltip = document.getElementById('preview-tooltip');
            tooltip.classList.toggle('show');
        }

        // 작업공간으로 보내기
        function sendToWorkspace() {
            if (!selectedColumnData) return;
            
            const selectedColumnsContainer = document.getElementById('selected-columns');
            const dropZone = document.getElementById('drop-zone');
            
            // 이미 추가된 컬럼인지 확인
            if (selectedColumns.find(col => col.name === selectedColumnData.name)) {
                alert('이미 추가된 컬럼입니다.');
                return;
            }
            
            selectedColumns.push(selectedColumnData);
            
            // 드롭존 숨기기
            if (selectedColumns.length === 1) {
                dropZone.style.display = 'none';
            }
            
            // 저장된 메타데이터 확인
            const metadata = columnMetadata[selectedColumnData.name] || {};
            const displayName = metadata.alias ? `${metadata.alias} (${selectedColumnData.name})` : selectedColumnData.name;
            
            // 컬럼 추가
            const columnElement = document.createElement('div');
            columnElement.className = 'selected-column';
            
            let columnHTML = `
                <div class="selected-column-info">
                    <div class="selected-column-name-small">${displayName}</div>
                    <div class="selected-column-source">${selectedColumnData.group}</div>
            `;
            
            // 설명이 있으면 추가
            if (metadata.description) {
                columnHTML += `<div class="selected-column-description">${metadata.description}</div>`;
            }
            
            columnHTML += `
                </div>
                <button class="remove-column" onclick="removeColumn('${selectedColumnData.name}')">×</button>
            `;
            
            columnElement.innerHTML = columnHTML;
            
            selectedColumnsContainer.appendChild(columnElement);
            
            // 증강용 컬럼 선택 업데이트 (요청 입력이 선택된 경우)
            const requestOption = document.getElementById('request');
            if (requestOption && requestOption.checked) {
                updateColumnSelectionForAugment();
            }

            // 중복도 검사 실행 (2개 이상 컬럼이 있을 때)
            if (selectedColumns.length >= 2) {
                checkDuplication();
            }
        }

        // 컬럼 제거
        function removeColumn(columnName) {
            selectedColumns = selectedColumns.filter(col => col.name !== columnName);
            
            // UI 업데이트
            const selectedColumnsContainer = document.getElementById('selected-columns');
            selectedColumnsContainer.innerHTML = '';
            
            selectedColumns.forEach(col => {
                // 저장된 메타데이터 확인
                const metadata = columnMetadata[col.name] || {};
                const displayName = metadata.alias ? `${metadata.alias} (${col.name})` : col.name;
                
                const columnElement = document.createElement('div');
                columnElement.className = 'selected-column';
                
                let columnHTML = `
                    <div class="selected-column-info">
                        <div class="selected-column-name-small">${displayName}</div>
                        <div class="selected-column-source">${col.group}</div>
                `;
                
                // 설명이 있으면 추가
                if (metadata.description) {
                    columnHTML += `<div class="selected-column-description">${metadata.description}</div>`;
                }
                
                columnHTML += `
                    </div>
                    <button class="remove-column" onclick="removeColumn('${col.name}')">×</button>
                `;
                
                columnElement.innerHTML = columnHTML;
                selectedColumnsContainer.appendChild(columnElement);
            });
            
            // 컬럼이 없으면 드롭존 다시 표시
            if (selectedColumns.length === 0) {
                document.getElementById('drop-zone').style.display = 'flex';
            }

            // 중복도 검사 업데이트 (2개 이상 컬럼이 있을 때)
            if (selectedColumns.length >= 2) {
                checkDuplication();
            } else {
                hideDuplicationIndicator();
            }
        }

        // 본체 데이터 선택
        function selectMasterData() {
            // 다른 선택 해제
            document.querySelectorAll('.team-request-card').forEach(card => {
                card.classList.remove('active');
            });
            
            // 본체 데이터 선택 표시
            document.querySelector('.master-data-section').style.background = '#e0e7ff';
            document.querySelector('.master-data-section').style.borderColor = '#667eea';
            
            // 빈 상태 숨기고 편집 영역 표시
            document.getElementById('empty-state').style.display = 'none';
            document.getElementById('hybrid-editor').style.display = 'grid';
            resetCentralPanelToMaster();
            
            // 알림 버튼 표시
            document.getElementById('notification-button').style.display = 'flex';
            
            console.log('Selected master data');
        }
        
        // 팀 데이터 선택
        function selectTeamData(teamId) {
            // 본체 데이터 선택 해제
            document.querySelector('.master-data-section').style.background = '#f8f9ff';
            document.querySelector('.master-data-section').style.borderColor = '#e0e7ff';
            
            document.querySelectorAll('.team-request-card').forEach(card => {
                card.classList.remove('active');
            });
            event.target.closest('.team-request-card').classList.add('active');
            
            // 빈 상태 숨기고 편집 영역 표시
            document.getElementById('empty-state').style.display = 'none';
            document.getElementById('hybrid-editor').style.display = 'grid';
            
            // 팀별로 중앙 패널의 데이터 목록 업데이트
            updateCentralPanelForTeam(teamId);
            console.log('Selected team data:', teamId);
        }

        // 팀별로 중앙 패널 데이터 업데이트
        function updateCentralPanelForTeam(teamId) {
            const teamDataConfigs = {
                'marketing': {
                    title: '마케팅팀 맞춤 데이터',
                    subtitle: '고객 분석 및 세그멘테이션을 위한 데이터셋',
                    columns: [
                        { group: '고객 정보', name: 'customer_id', type: '텍스트(20)', agent: '고객 세그멘테이션 에이전트' },
                        { group: '고객 정보', name: 'age_group', type: '텍스트(10)', agent: '인구통계 분석 에이전트' },
                        { group: '고객 정보', name: 'region', type: '텍스트(50)', agent: '지역별 마케팅 에이전트' },
                        { group: '거래 정보', name: 'purchase_date', type: '날짜시간', agent: '구매 패턴 분석 에이전트' },
                        { group: '거래 정보', name: 'product_category', type: '텍스트(50)', agent: '상품 추천 에이전트' }
                    ]
                },
                'dev': {
                    title: '개발팀 ML 학습용 데이터',
                    subtitle: '머신러닝 모델 학습 및 예측을 위한 데이터셋',
                    columns: [
                        { group: '거래 정보', name: 'transaction_id', type: '텍스트(20)', agent: 'ML 전처리 에이전트' },
                        { group: '거래 정보', name: 'amount', type: '숫자(10,2)', agent: '금액 예측 에이전트' },
                        { group: '거래 정보', name: 'payment_method', type: '텍스트(20)', agent: '결제 패턴 분석 에이전트' },
                        { group: '고객 정보', name: 'customer_id', type: '텍스트(20)', agent: '고객 행동 예측 에이전트' }
                    ]
                },
                'finance': {
                    title: '재무팀 리포트용 데이터',
                    subtitle: '월별 집계 및 재무 분석을 위한 데이터셋',
                    columns: [
                        { group: '거래 정보', name: 'amount', type: '숫자(10,2)', agent: '매출 예측 에이전트' },
                        { group: '거래 정보', name: 'purchase_date', type: '날짜시간', agent: '트렌드 분석 에이전트' },
                        { group: '거래 정보', name: 'payment_method', type: '텍스트(20)', agent: '결제 비용 최적화 에이전트' },
                        { group: '고객 정보', name: 'region', type: '텍스트(50)', agent: '지역별 수익성 에이전트' }
                    ]
                },
                'sales': {
                    title: '영업팀 고객 분석용 데이터',
                    subtitle: '고객 세그먼트 및 리드 스코어링을 위한 데이터셋',
                    columns: [
                        { group: '고객 정보', name: 'customer_name', type: '텍스트(100)', agent: '리드 스코어링 에이전트' },
                        { group: '고객 정보', name: 'email', type: 'VARCHAR(200)', agent: '이메일 마케팅 에이전트' },
                        { group: '고객 정보', name: 'phone', type: 'VARCHAR(15)', agent: '콜 센터 에이전트' },
                        { group: '거래 정보', name: 'amount', type: '숫자(10,2)', agent: '고객 가치 분석 에이전트' }
                    ]
                }
            };

            const config = teamDataConfigs[teamId];
            if (!config) return;

            // 중앙 패널 업데이트
            updateCentralPanelContent(config);
        }

        // 중앙 패널을 원본 마스터 데이터로 리셋
        function resetCentralPanelToMaster() {
            const treeTitle = document.querySelector('.tree-title');
            treeTitle.textContent = '데이터 컬럼 (4.8GB)';
            
            // 기존 팀별 그룹 제거
            document.querySelectorAll('.team-specific-group').forEach(group => group.remove());
            
            // 기본 그룹들을 다시 표시
            document.getElementById('customer-columns').style.display = 'block';
            document.getElementById('transaction-columns').style.display = 'block';
        }

        // 중앙 패널 컨텐츠 업데이트
        function updateCentralPanelContent(config) {
            const treeTitle = document.querySelector('.tree-title');
            
            // 제목 업데이트
            treeTitle.textContent = config.title;
            
            // 기본 그룹들 숨기기
            document.getElementById('customer-columns').style.display = 'none';
            document.getElementById('transaction-columns').style.display = 'none';
            
            // 기존 팀별 그룹 제거
            document.querySelectorAll('.team-specific-group').forEach(group => group.remove());
            
            // 새로운 컨텐츠 생성
            const columnTree = document.querySelector('.column-tree');
            
            const groupedColumns = config.columns.reduce((acc, col) => {
                if (!acc[col.group]) acc[col.group] = [];
                acc[col.group].push(col);
                return acc;
            }, {});
            
            Object.keys(groupedColumns).forEach(groupName => {
                const cols = groupedColumns[groupName];
                const groupElement = document.createElement('div');
                groupElement.className = 'column-group team-specific-group';
                groupElement.innerHTML = `
                    <div class="group-header" onclick="toggleGroup('team-${groupName.replace(/\\s/g, '')}')">
                        <span class="group-icon">▼</span>
                        <span class="group-name">${groupName} (${cols.length}개)</span>
                    </div>
                    <div class="column-list" id="team-${groupName.replace(/\\s/g, '')}-columns">
                        ${cols.map(col => `
                            <div class="column-item" onclick="selectTeamColumn('${col.name}', '${col.type}', '${col.group}', '${col.agent}')">
                                <div class="column-name">${col.name}</div>
                                <div class="column-type">${col.type.split('(')[0]}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
                columnTree.appendChild(groupElement);
            });
        }

        // 데이터 내보내기
        function exportData(format) {
            if (selectedColumns.length === 0) {
                alert('먼저 컬럼을 선택해주세요.');
                return;
            }
            
            alert(`${format.toUpperCase()} 형식으로 ${selectedColumns.length}개 컬럼을 내보냅니다.`);
        }

        // 합성 데이터 옵션 선택
        function selectSyntheticOption(option) {
            const augmentDetailOptions = document.getElementById('augmentDetailOptions');
            const requestNotification = document.getElementById('requestNotification');
            
            if (option === 'enable') {
                // 증강 적용 선택 시 세부 옵션 표시
                augmentDetailOptions.style.display = 'block';
                requestNotification.style.display = 'none';
            } else {
                // 해당 없음 선택 시 세부 옵션 숨김
                augmentDetailOptions.style.display = 'none';
                requestNotification.style.display = 'none';
                
                // 세부 옵션 체크박스들 초기화
                document.getElementById('crawling').checked = false;
                document.getElementById('row').checked = false;
            }
        }

        // 증강 방식 업데이트
        function updateAugmentMethod() {
            const requestNotification = document.getElementById('requestNotification');
            
            // 하나라도 선택되면 알림 표시
            const crawlingChecked = document.getElementById('crawling').checked;
            const rowChecked = document.getElementById('row').checked;
            
            if (crawlingChecked || rowChecked) {
                requestNotification.style.display = 'block';
                
                // 선택된 옵션에 따른 메시지 업데이트
                const notificationText = document.querySelector('#requestNotification .notification-text');
                let message = '데이터 증강이 선택되었습니다.<br>';
                
                if (crawlingChecked && rowChecked) {
                    message += '크롤링 기반 및 로우 단위 증강이 적용됩니다.<br>';
                } else if (crawlingChecked) {
                    message += '크롤링 기반 증강이 적용됩니다.<br>';
                } else if (rowChecked) {
                    message += '로우 단위 증강이 적용됩니다.<br>';
                }
                
                message += '백그라운드 작업을 위한 알람 채널을 알려주세요.';
                notificationText.innerHTML = message;
            } else {
                requestNotification.style.display = 'none';
            }
        }

        // 증강용 컬럼 선택 업데이트
        function updateColumnSelectionForAugment() {
            const container = document.getElementById('selectedColumnsForAugment');
            container.innerHTML = '';
            
            if (selectedColumns.length === 0) {
                container.innerHTML = '<div style="color: #8e8e93; font-size: 12px; padding: 8px;">먼저 좌측에서 컬럼을 선택해주세요.</div>';
                return;
            }
            
            selectedColumns.forEach((column, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'augment-column-option';
                optionDiv.innerHTML = `
                    <input type="checkbox" id="augment-${index}" onchange="toggleColumnComment('${column.name}', ${index})">
                    <label for="augment-${index}">${column.name} (${column.type})</label>
                `;
                container.appendChild(optionDiv);
            });
        }

        // 컬럼별 코멘트 토글
        function toggleColumnComment(columnName, index) {
            const checkbox = document.getElementById(`augment-${index}`);
            const commentId = `comment-${index}`;
            const commentContainer = document.getElementById('columnComments');
            let commentItem = document.getElementById(commentId);
            
            if (checkbox.checked) {
                if (!commentItem) {
                    commentItem = document.createElement('div');
                    commentItem.id = commentId;
                    commentItem.className = 'column-comment-item';
                    commentItem.innerHTML = `
                        <div class="column-comment-title">${columnName} 증강 요청</div>
                        <textarea class="column-comment-textarea" placeholder="이 컬럼에 대한 구체적인 데이터 증강 요청사항을 입력해주세요..."></textarea>
                    `;
                    commentContainer.appendChild(commentItem);
                }
                commentItem.classList.add('show');
            } else {
                if (commentItem) {
                    commentItem.classList.remove('show');
                    setTimeout(() => {
                        if (commentItem && !commentItem.classList.contains('show')) {
                            commentItem.remove();
                        }
                    }, 300);
                }
            }
        }

        // 데이터 생성 함수
        function generateData() {
            const enableOption = document.getElementById('enable');
            const crawlingOption = document.getElementById('crawling');
            const rowOption = document.getElementById('row');
            
            // 증강이 활성화되고 세부 방식이 선택된 경우
            if (enableOption && enableOption.checked && 
                ((crawlingOption && crawlingOption.checked) || (rowOption && rowOption.checked))) {
                // 새로운 팀별 데이터 요청을 왼쪽 패널에 추가 (증강 상태)
                addAugmentingTeamDataRequest(selectedColumns);
            } else {
                // 일반적인 팀 데이터셋 생성 로직
                createTeamDataset();
            }
        }

        // 데이터 증강 중인 팀별 데이터 요청 추가
        function addAugmentingTeamDataRequest(columns) {
            const teamRequestsContainer = document.querySelector('.team-requests');
            const newRequestId = 'augmenting-request-' + Date.now();
            
            const newRequestCard = document.createElement('div');
            newRequestCard.className = 'team-request-card new-request augmenting';
            newRequestCard.style.border = '2px solid #ff9500';
            newRequestCard.style.backgroundColor = 'linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%)';
            newRequestCard.onclick = () => selectAugmentingData(newRequestId);
            
            newRequestCard.innerHTML = `
                <div class="team-info">
                    <div class="team-avatar" style="background: #ff9500;">🧪</div>
                    <div class="team-name">데이터 증강 요청</div>
                </div>
                <div class="request-purpose">합성 데이터 생성 중</div>
                <div class="request-details">
                    <div class="data-format">증강 진행 중</div>
                    <div class="augmenting-text" style="position: static; transform: none; background: #ff9500; margin-top: 8px;">데이터 증강 중</div>
                </div>
            `;
            
            // 맨 위에 추가
            teamRequestsContainer.insertBefore(newRequestCard, teamRequestsContainer.firstChild);
            
            alert('데이터 증강 요청이 생성되었습니다.\n좌측 데이터 탐색기에서 진행 상황을 확인할 수 있습니다.');
        }

        // 데이터 증강 요청 선택 (협업 요청 알림 없이)
        function selectAugmentingData(requestId) {
            // 본체 데이터 선택 해제
            document.querySelector('.master-data-section').style.background = '#f8f9ff';
            document.querySelector('.master-data-section').style.borderColor = '#e0e7ff';
            
            document.querySelectorAll('.team-request-card').forEach(card => {
                card.classList.remove('active');
            });
            event.target.closest('.team-request-card').classList.add('active');
            
            // 빈 상태 숨기고 편집 영역 표시
            document.getElementById('empty-state').style.display = 'none';
            document.getElementById('hybrid-editor').style.display = 'grid';
            
            // 증강 데이터 전용 중앙 패널 업데이트
            updateCentralPanelForAugmenting(requestId);
            
            console.log('Selected augmenting data:', requestId);
        }

        // 증강 데이터용 중앙 패널 업데이트
        function updateCentralPanelForAugmenting(requestId) {
            // 증강 진행 상태 표시
            const dataTitle = document.querySelector('.data-title');
            const dataSubtitle = document.querySelector('.data-subtitle');
            
            if (dataTitle) dataTitle.textContent = '데이터 증강 진행 중';
            if (dataSubtitle) dataSubtitle.textContent = '합성 데이터 생성 및 처리 중입니다. 완료까지 약 5-10분 소요됩니다.';
            
            // 컬럼 목록은 빈 상태로 표시 (증강 중이므로)
            const columnGroups = document.querySelector('.column-groups');
            if (columnGroups) {
                columnGroups.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #8e8e93;">
                        <div style="font-size: 24px; margin-bottom: 12px;">⏳</div>
                        <div>데이터 증강 처리 중...</div>
                        <div style="font-size: 12px; margin-top: 8px;">잠시만 기다려주세요</div>
                    </div>
                `;
            }
        }

        // 팀 데이터셋 생성
        function createTeamDataset() {
            if (selectedColumns.length === 0) {
                alert('먼저 컬럼을 선택해주세요.');
                return;
            }
            
            // 새로운 팀별 데이터 요청을 왼쪽 패널에 추가
            addTeamDataRequest(selectedColumns);
            
            alert(`${selectedColumns.length}개 컬럼으로 팀 데이터셋을 생성했습니다.\n포함된 컬럼: ${selectedColumns.map(col => col.name).join(', ')}\n\n새로운 팀별 데이터 요청이 왼쪽 패널에 추가되었습니다.`);
        }

        // 팀별 데이터 요청 추가
        function addTeamDataRequest(columns) {
            const teamRequestsContainer = document.querySelector('.team-requests');
            const newRequestId = 'new-request-' + Date.now();
            
            const newRequestCard = document.createElement('div');
            newRequestCard.className = 'team-request-card new-request';
            newRequestCard.style.border = '2px solid #667eea';
            newRequestCard.style.backgroundColor = '#f8f9ff';
            newRequestCard.onclick = () => selectTeamData(newRequestId);
            
            newRequestCard.innerHTML = `
                <div class="team-info">
                    <div class="team-avatar" style="background: #667eea;">📊</div>
                    <div class="team-name">새 데이터 요청</div>
                    <div class="priority-badge priority-high">New</div>
                </div>
                <div class="request-purpose">방금 생성한 맞춤 데이터셋 (${columns.length}개 컬럼)</div>
                <div class="request-details">
                    <div class="data-format">맞춤형</div>
                </div>
            `;
            
            // 맨 위에 추가
            teamRequestsContainer.insertBefore(newRequestCard, teamRequestsContainer.firstChild);
            
            // 5초 후 일반 스타일로 변경
            setTimeout(() => {
                newRequestCard.style.border = '1px solid #e9ecef';
                newRequestCard.style.backgroundColor = 'white';
            }, 5000);
        }

        // 컬럼 별칭 추가
        function addColumnAlias() {
            if (!selectedColumnData) return;
            
            // 원본 컬럼명이 없으면 현재 이름을 원본으로 저장
            if (!selectedColumnData.originalName) {
                selectedColumnData.originalName = selectedColumnData.name;
            }
            
            const alias = prompt('컬럼 별칭을 입력하세요:', selectedColumnData.alias || '');
            if (alias !== null) {
                if (alias.trim()) {
                    selectedColumnData.alias = alias.trim();
                    document.getElementById('column-alias-value').textContent = alias.trim();
                    document.getElementById('column-alias-info').style.display = 'flex';
                    
                    // 메타데이터 영구 저장
                    if (!columnMetadata[selectedColumnData.name]) {
                        columnMetadata[selectedColumnData.name] = {};
                    }
                    columnMetadata[selectedColumnData.name].alias = alias.trim();
                    columnMetadata[selectedColumnData.name].originalName = selectedColumnData.originalName;
                    
                    alert(`별칭 '${alias.trim()}'이 추가되었습니다.\n원본 컬럼명 '${selectedColumnData.originalName}'은 보존됩니다.`);
                } else {
                    // 빈 별칭인 경우 별칭 제거
                    selectedColumnData.alias = null;
                    document.getElementById('column-alias-info').style.display = 'none';
                    
                    // 메타데이터에서 별칭 제거
                    if (columnMetadata[selectedColumnData.name]) {
                        delete columnMetadata[selectedColumnData.name].alias;
                    }
                    
                    alert('별칭이 제거되었습니다.');
                }
            }
        }

        // 컬럼 설명 추가
        function addColumnDescription() {
            if (!selectedColumnData) return;
            
            const description = prompt('컬럼 설명을 입력하세요:', selectedColumnData.description || '');
            if (description !== null) {
                if (description.trim()) {
                    selectedColumnData.description = description.trim();
                    document.getElementById('column-description-value').textContent = description.trim();
                    document.getElementById('column-description-info').style.display = 'flex';
                    
                    // 메타데이터 영구 저장
                    if (!columnMetadata[selectedColumnData.name]) {
                        columnMetadata[selectedColumnData.name] = {};
                    }
                    columnMetadata[selectedColumnData.name].description = description.trim();
                    
                    alert(`컬럼 설명이 저장되었습니다.`);
                } else {
                    // 빈 설명인 경우 설명 제거
                    selectedColumnData.description = null;
                    document.getElementById('column-description-info').style.display = 'none';
                    
                    // 메타데이터에서 설명 제거
                    if (columnMetadata[selectedColumnData.name]) {
                        delete columnMetadata[selectedColumnData.name].description;
                    }
                    
                    alert('컬럼 설명이 제거되었습니다.');
                }
            }
        }

        // 데이터 변환 설정
        function setTransform(type) {
            document.querySelectorAll('.action-group:nth-child(2) .action-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            console.log('Transform type set:', type);
        }

        // 접근 권한 설정
        function setAccess(level) {
            document.querySelectorAll('.action-group:nth-child(3) .action-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            console.log('Access level set:', level);
        }

        // 에이전트 분석으로 진행
        function proceedToAnalysis() {
            if (confirm('협업 워크스페이스 설정이 완료되었습니다.\n에이전트 분석 단계로 진행하시겠습니까?')) {
                updateStepIndicator(4);
                alert('Step 4 (에이전트 분석) 단계로 진행합니다.\n\n협업 완료 결과:\n- 선택된 개인 컬럼: ' + selectedColumns.length + '개\n- 팀별 데이터 요청 처리 완료\n- 협업 히스토리 기록 완료');
            }
        }

        // 중복도 검사 시스템
        
        // 모의 팀 데이터셋 정보 (실제로는 서버에서 가져올 데이터)
        const mockTeamDatasets = [
            {
                team: '마케팅팀',
                columns: ['customer_id', 'purchase_date', 'amount', 'product_category', 'campaign_source'],
                createdBy: 'user@marketing.team'
            },
            {
                team: '재무팀',
                columns: ['customer_id', 'amount', 'payment_method', 'transaction_date', 'currency'],
                createdBy: 'user@finance.team'
            },
            {
                team: '영업팀',
                columns: ['customer_id', 'contact_date', 'lead_score', 'sales_stage', 'expected_revenue'],
                createdBy: 'user@sales.team'
            }
        ];

        // 모의 관련 리포트 정보
        const mockRelatedReports = [
            {
                agent: '마케팅 분석 에이전트',
                title: '고객 구매 패턴 분석 리포트',
                columns: ['customer_id', 'purchase_date', 'amount'],
                reportId: 'marketing_001'
            },
            {
                agent: '재무 분석 에이전트',
                title: '월별 매출 트렌드 분석',
                columns: ['amount', 'purchase_date', 'currency'],
                reportId: 'finance_001'
            },
            {
                agent: '영업 분석 에이전트',
                title: '리드 스코어링 모델 결과',
                columns: ['customer_id', 'lead_score', 'contact_date'],
                reportId: 'sales_001'
            }
        ];

        // 중복도 검사 실행
        function checkDuplication() {
            if (selectedColumns.length < 2) {
                hideDuplicationIndicator();
                return;
            }

            // 현재 선택된 컬럼 이름들
            const currentColumns = selectedColumns.map(col => col.name);
            
            let highestDuplicate = null;
            let maxScore = 0;

            // 각 팀 데이터셋과 비교
            mockTeamDatasets.forEach(dataset => {
                const commonColumns = dataset.columns.filter(col => currentColumns.includes(col));
                const score = Math.round((commonColumns.length / Math.max(currentColumns.length, dataset.columns.length)) * 100);
                
                if (score > maxScore && score > 30) { // 30% 이상일 때만 표시
                    maxScore = score;
                    highestDuplicate = {
                        team: dataset.team,
                        score: score,
                        commonColumns: commonColumns,
                        createdBy: dataset.createdBy
                    };
                }
            });

            if (highestDuplicate) {
                showDuplicationIndicator(highestDuplicate);
                checkRelatedReports(currentColumns);
            } else {
                hideDuplicationIndicator();
            }
        }

        // 중복도 표시
        function showDuplicationIndicator(duplicate) {
            const indicator = document.getElementById('duplicate-indicator');
            const score = document.getElementById('duplicate-score');
            const teamInfo = document.getElementById('duplicate-team-info');
            const columns = document.getElementById('duplicate-columns');

            // 중복도에 따른 레벨 결정
            let level = 'low';
            let levelText = '낮음';
            if (duplicate.score >= 80) {
                level = 'high';
                levelText = '높음';
            } else if (duplicate.score >= 50) {
                level = 'medium';
                levelText = '보통';
            }

            // CSS 클래스 업데이트
            indicator.className = `duplicate-indicator active ${level}`;
            score.className = `duplicate-score ${level}`;
            score.textContent = `중복도 ${duplicate.score}%`;

            // 레벨 텍스트 업데이트
            const levelElement = score.nextElementSibling;
            levelElement.textContent = levelText;

            teamInfo.textContent = `${duplicate.team} 데이터셋과 높은 유사성`;
            columns.textContent = `공통 컬럼: ${duplicate.commonColumns.join(', ')}`;

            indicator.style.display = 'block';
        }

        // 중복도 표시 숨기기
        function hideDuplicationIndicator() {
            const indicator = document.getElementById('duplicate-indicator');
            const reportsSection = document.getElementById('related-reports-section');
            
            indicator.style.display = 'none';
            reportsSection.style.display = 'none';
        }

        // 관련 리포트 검사
        function checkRelatedReports(currentColumns) {
            const relatedReports = [];

            mockRelatedReports.forEach(report => {
                const commonColumns = report.columns.filter(col => currentColumns.includes(col));
                if (commonColumns.length >= 2) { // 2개 이상 공통 컬럼
                    relatedReports.push({
                        ...report,
                        commonColumns: commonColumns,
                        relevanceScore: Math.round((commonColumns.length / report.columns.length) * 100)
                    });
                }
            });

            if (relatedReports.length > 0) {
                showRelatedReports(relatedReports);
            }
        }

        // 관련 리포트 표시
        function showRelatedReports(reports) {
            const reportsSection = document.getElementById('related-reports-section');
            const container = document.getElementById('related-reports-container');

            container.innerHTML = '';

            reports.forEach(report => {
                const reportElement = document.createElement('div');
                reportElement.className = 'related-report-item';
                reportElement.onclick = () => navigateToReport(report.reportId);

                reportElement.innerHTML = `
                    <div class="report-agent-info">${report.agent} • 연관도 ${report.relevanceScore}%</div>
                    <div class="report-title">${report.title}</div>
                `;

                container.appendChild(reportElement);
            });

            reportsSection.style.display = 'block';
        }

        // 리포트로 이동
        function navigateToReport(reportId) {
            // 실제로는 리포트 페이지로 이동하는 로직 구현
            alert(`${reportId} 리포트로 이동합니다.\n\n분석 결과를 확인하여 중복된 작업을 방지하고 기존 인사이트를 활용할 수 있습니다.`);
            
            // 예시: 리포트 섹션으로 스크롤 또는 모달 표시
            // window.location.hash = `#report-${reportId}`;
        }

        // 협업 히스토리 사이드 패널 열기/닫기
        function toggleCollaborationPanel() {
            const panel = document.getElementById('collaboration-panel');
            const overlay = document.getElementById('panel-overlay');
            
            if (panel.classList.contains('active')) {
                // 패널 닫기
                panel.classList.remove('active');
                overlay.classList.remove('active');
            } else {
                // 패널 열기
                panel.classList.add('active');
                overlay.classList.add('active');
            }
        }

        // 드래그 앤 드롭 지원 (향후 구현)
        document.addEventListener('DOMContentLoaded', function() {
            const dropZone = document.getElementById('drop-zone');
            
            dropZone.addEventListener('dragover', function(e) {
                e.preventDefault();
                dropZone.classList.add('dragover');
            });
            
            dropZone.addEventListener('dragleave', function(e) {
                dropZone.classList.remove('dragover');
            });
            
            dropZone.addEventListener('drop', function(e) {
                e.preventDefault();
                dropZone.classList.remove('dragover');
                // 드롭 처리 로직은 추후 구현
            });
            
            // 초기 상태 설정
            updateStepIndicator(1);
        });
        
        // 팀 데이터 전체 요청
        function requestTeamData(event, teamId) {
            event.stopPropagation(); // 부모 클릭 이벤트 방지
            
            const teamNames = {
                'marketing': '마케팅팀',
                'dev': '개발팀', 
                'finance': '재무팀',
                'sales': '영업팀'
            };
            
            const teamName = teamNames[teamId] || teamId;
            
            // 히스토리에 새 항목 추가 시뮬레이션
            alert(`${teamName}에서 데이터 공유 요청이 접수되었습니다.\n\n요청 내용이 협업 히스토리에 기록됩니다.\n상단 알림 버튼을 클릭하여 승인/거절을 통해 협업을 진행할 수 있습니다.`);
            
            // 알림 버튼 표시
            document.getElementById('notification-button').style.display = 'flex';
            
            console.log('Team data requested:', teamId);
        }
        
        // 분석 미리보기 팝업 표시
        function showAnalysisPopup() {
            document.getElementById('analysis-popup').style.display = 'flex';
        }
        
        // 분석 미리보기 팝업 닫기
        function closeAnalysisPopup() {
            document.getElementById('analysis-popup').style.display = 'none';
        }
        
        // 팝업 배경 클릭 시 닫기
        document.addEventListener('click', function(event) {
            const popup = document.getElementById('analysis-popup');
            if (event.target === popup) {
                closeAnalysisPopup();
            }
        });
    </script>

    <!-- 협업 히스토리 사이드 패널 -->
    <div class="collaboration-panel" id="collaboration-panel">
        <div class="panel-header">
            <div class="panel-title">협업 히스토리</div>
            <button class="panel-close-btn" onclick="toggleCollaborationPanel()">×</button>
        </div>
        
        <div class="panel-content">
            <div class="history-section">
                <div class="section-header">
                    <div class="section-title">내가 요청한 내용</div>
                    <div class="section-count">3</div>
                </div>
                
                <div class="history-item">
                    <div class="history-item-header">
                        <div class="history-item-title">마케팅팀에 고객 세그먼트 데이터 요청</div>
                        <div class="history-status status-pending">승인 대기</div>
                    </div>
                    <div class="history-item-desc">
                        고객 ID, 연령대, 구매 이력 컬럼이 포함된 데이터셋을 마케팅팀에 공유 요청
                    </div>
                    <div class="history-actions">
                        <button class="history-action-btn">수정</button>
                        <button class="history-action-btn">취소</button>
                    </div>
                </div>

                <div class="history-item">
                    <div class="history-item-header">
                        <div class="history-item-title">개발팀에 API 연동 데이터 요청</div>
                        <div class="history-status status-completed">완료</div>
                    </div>
                    <div class="history-item-desc">
                        ML 학습용 정규화된 거래 데이터 JSON 포맷으로 공유 완료
                    </div>
                </div>

                <div class="history-item">
                    <div class="history-item-header">
                        <div class="history-item-title">재무팀에 월별 리포트 데이터 요청</div>
                        <div class="history-status status-approved">승인됨</div>
                    </div>
                    <div class="history-item-desc">
                        월별 매출 집계 데이터 Excel 형태로 공유 예정
                    </div>
                </div>
            </div>

            <div class="history-section">
                <div class="section-header">
                    <div class="section-title">받은 요청</div>
                    <div class="section-count">2</div>
                </div>
                
                <div class="history-item">
                    <div class="history-item-header">
                        <div class="history-item-title">영업팀이 고객 연락처 데이터 요청</div>
                        <div class="history-status status-pending">검토 중</div>
                    </div>
                    <div class="history-item-desc">
                        신규 고객 발굴을 위한 연락처 및 지역 정보 데이터 공유 요청
                    </div>
                    <div class="history-actions">
                        <button class="history-action-btn approve">승인</button>
                        <button class="history-action-btn reject">거절</button>
                    </div>
                </div>

                <div class="history-item">
                    <div class="history-item-header">
                        <div class="history-item-title">재무팀이 결제 데이터 요청</div>
                        <div class="history-status status-completed">승인 완료</div>
                    </div>
                    <div class="history-item-desc">
                        분기별 매출 분석을 위한 결제 방법 및 금액 데이터 공유 완료
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 사이드 패널 배경 오버레이 -->
    <div class="panel-overlay" id="panel-overlay" onclick="toggleCollaborationPanel()"></div>
</body>
</html>